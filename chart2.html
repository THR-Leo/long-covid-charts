<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Chart 2</title>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #ffffff;
    font-family: Arial, Helvetica, sans-serif;
  }

  #chart_div {
    width: 100%;
  }

  .caption {
    font-size: 14px;
    margin-top: 8px;
  }
</style>
</head>
<body>

<div id="chart_div"></div>
<div class="caption">
  Share of people who had COVID and developed Long COVID, by gender, December 2022
</div>

<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

function computeChartHeight(w) {
  // Reduced mobile height so legend + caption fit without scrolling
  if (w < 360) return 360;
  if (w < 420) return 380;
  if (w < 520) return 400;
  return 520;
}

function drawChart() {

  var data = google.visualization.arrayToDataTable([
    ['Gender', 'Severe Symptoms', 'Moderate Symptoms', 'Minimal Symptoms', 'No Response'],
    ['Trans People', 42, 14, 3, 40],
    ['Other', 27, 39, 2, 32],
    ['Cis Women', 10, 24, 9, 57],
    ['Cis Men', 9, 20, 6, 66]
  ]);

  var width = window.innerWidth;
  var height = computeChartHeight(width);
  var isMobile = width < 520;

  var options = {
    isStacked: true,
    width: '100%',
    height: height,
    backgroundColor: '#ffffff',
    legend: {
      position: 'bottom',
      alignment: 'start'
    },
    chartArea: {
      left: isMobile ? 70 : 90,
      right: 20,
      top: isMobile ? 30 : 22,
      bottom: isMobile ? 58 : 62,
      width: '100%',
      height: '100%'
    },
    vAxis: {
      minValue: 0,
      maxValue: 100,
      ticks: [0, 20, 40, 60, 80, 100]
    },
    hAxis: {
      textStyle: { fontSize: isMobile ? 12 : 14 }
    },
    colors: ['#001a57', '#0c4b5f', '#2f4f1f', '#333333']
  };

  var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}

window.addEventListener('resize', drawChart);
</script>

</body>
</html>
